# miteneDownloader
Download jpg/mp4 files from mitene

みてねにアップロードした画像をまとめてダウンロードします。

      注意：1度にまとめてダウンロードできるのは、1ページに表示されている 25 個の画像/動画です。

複数ページのファイルをダウンロードするには、複数回の操作が必要です。

      注意：動画はまとめては落ちてきません。1ファイルずつ手動でDLする必要があります。

コードの説明はこちら：

https://qiita.com/miworky/items/4d10824117527d115113


# ●使用方法

1) アプリケーションを起動する

2) ブラウザでみてねのブラウザ版のサイトにアクセスする

ブラウザ版のサイトにアクセスするには、みてねアプリから招待する。

      「家族設定」->「家族一覧」->「家族を招待する」->「ブラウザ版で招待」

3) （初回のみ）アプリケーションからみてねのブラウザ版のサイトにログインする

    1. アプリケーションの「Login(first time only)」ボタンの左にあるテキストボックスに2のURLを入れて「Login(first time only)」ボタンを押す。
 
    1. アプリケーション内にみてねのログイン画面が表示されるので、ログインする。

    1. ログイン後は、アプリケーションを再起動してください。

          アプリケーションからみてねにログインすることで、認証情報がcookieに保存されるので、次回からは認証は不要。
  
4) ブラウザでみてねのダウンロードしたいページに移動する

    URLの末尾に以下のように追加することで任意のページを表示できる：

        ?page=13

    この例だと、13ページめが表示される。
　

      なお、「?page=1」とすれば、先頭のページ（最新）が表示される。


5) ブラウザ上で右クリックして「ページのソースを表示」を選択する（※）

  （※）Chromeの場合

6) 表示されたソースの 3 行目（window.gon={}で始まる行）をコピーして、アプリケーションのテキストボックスにペーストする


7) アプリケーションの「load」ボタンを押す

  ブラウザ版で表示したページの動画と画像の一覧が表示される。ファイル名は、「撮影日時_最初のコメント」（yyyy-mm-ddThhmmss_最初のコメント）となる。

    Note：このようなファイル名にすることで、動画編集ソフトに配置すれば撮影日順にタイムラインに配置できる。

  ファイル名の右に表示される数字は、ファイルをアップロードしたユーザーのID。この ID を見ることで誰がアップロードしたファイルなのかがわかる。


8) 画像ファイル・動画ファイルをDLする

 8.1) 画像ファイルをDLするには、「Download All Photo」ボタンを押す

   「Download All Photo」ボタンを押すと、ダウンロード先のフォルダを選択するダイアログが表示される。選択したフォルダに、表示されているすべての画像ファイルがダウンロードされる。

 8.2) 動画ファイルをDLするには  
   8.2.1) 「Photo」のチェックを外して、動画ファイルのみリストに表示させる  
   8.2.2)  DLしたい動画ファイルの左にある「copyToClipboard」ボタンを押し、ファイルのリンクをクリックする   
     ファイル名選択ダイアログが表示されるので、CTRL+Vを押してファイル名をペーストする。  
　　　保存ボタンを押すことで動画ファイルがDLされる。  
     

  Note: ファイルへのリンクには有効期限があります。

  4 でみてねのページを表示してから一定時間内に 8 の操作をしてください。
リンクの有効期限が切れていたら、ファイルは正しくダウンロードできません。
リンクの有効期限が切れていた時にダウンロードしたファイルの中身にはテキストでエラー内容が記載されています。この場合、再度 4 からやり直してください。


ほかのページのファイルをダウンロードするには、4-8 を繰り返す。





# ●開発環境構築方法

○Windows


1)Node.jsをインストールする

https://nodejs.org/

LTS版をインストールする。
インストーラーでは、すべて「Next」を選択する。

Node.js がインストールされたことを確認するには
コマンドプロンプトを起動して

      node -v

と入力する。

      v14.17.4

のようにバージョンが表示されればインストールされている。


2)yarnをインストールする

コマンドプロンプトから以下を実行する：

      npm install -g yarn

yarn がインストールされたことを確認するには、コマンドプロンプトから

       yarn --version

と入力する。

      1.22.11
      
のようにバージョンが表示されればインストールされている。



○Mac

1)Homebrew をインストールする

https://brew.sh/index_ja

Note: 以下の 2, 3 でエラー発生した場合は、ここからやり直すとよいかも。


2)nodebrew をインストールする

      brew install nodebrew

3)Node.js をインストールする

      nodebrew install-binary stable

使用するバージョンを設定する。

まず、インストールされたバージョンを確認し、次にそのバージョンを使用するコマンドを打つ：

      nodebrew ls

      v16.7.0

      current: none

       nodebrew use v16.7.0
      use v16.7.0

4)Node.js のパスを環境変数に登録する

      echo 'export PATH=$HOME/.nodebrew/current/bin:$PATH' >> ~/.zprofile

      source ~/.zprofile 

Node.js がインストールされたことを確認するには

      node -v

と入力する。

      v16.7.0

のようにバージョンが表示されればインストールされている。

5)yarnをインストールする

コマンドプロンプトから以下を実行する：

      npm install -g yarn

yarn がインストールされたことを確認するには、コマンドプロンプトから

      yarn --version

と入力する。

      1.22.11

のようにバージョンが表示されればインストールされている。




# ●ビルド準備

ソースコードのあるフォルダで以下を入力する：

      yarn install

これで必要なライブラリがダウンロードされる。


# ●実行手順

以下を実行すればアプリケーションが実行される：

      yarn run start



# ●パッケージの作成手順

○Windows
      
      yarn run build:win

○Mac
      
      yarn run build:mac





